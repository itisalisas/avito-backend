# avito-backend

## Инструкция по запуску

Необходим установленный Go и PostgreSQL

Скачайте репозиторий:

```shell
git clone https://github.com/itisalisas/avito-backend.git
cd avito-backend
```

Укажите в `.env` файле необходимые переменные окружения 
(если тесты на БД не нужны, переменные с суффиксом `_TEST` можно не задавать)

Запустите приложение:

```shell
go run main.go
```

В проекте настроена кодогенерация DTO endpoint'ов по openapi схеме
Для запуска:
```shell
make generate-dto
````

## Об архитектуре

В директории [docs](./docs) можно подробнее ознакомиться с архитектурой проекта.

Из дополнительных заданий:
- реализована пользовательская авторизация по методам /register и /login 
- добавлен prometheus и сбор метрик
- настроена кодогенерация DTO endpoint'ов по openapi схеме
- из логирования логируются коды коврата через `middleware.Logger`, в теории можно было еще добавить `zap`
Реализовать gRPC-метод, который просто вернёт все добавленные в систему ПВЗ. Для него не требуется проверка авторизации и валидация ролей пользователей. Сервер для gRPC должен быть запущен на порту 3000. Обратите внимание, что в файле pvz.proto необходимо прописать go_package под вашу структуру проекта

Немного не хватило времени, хотелось настроить в CI нормальный запуск тестов, но с настройкой запуска тестов на БД 
через .env не успела справиться, поэтому они там падают. Можно запустить локально, указав нужные поля.

```